% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/cran-ls.R
\name{scan_package}
\alias{scan_package}
\title{Scan a CRAN package for GDAL-readable files}
\usage{
scan_package(package)
}
\arguments{
\item{package}{Character string, name of a package available on CRAN.}
}
\value{
A tibble with columns:
\itemize{
\item \code{package}: the package name
\item \code{driver}: GDAL driver name (e.g. "GTiff", "GPKG", "netCDF")
\item \code{dsn}: full GDAL-readable URI to the file
}

Returns \code{NULL} if no GDAL-readable files are found.
}
\description{
Queries a package source tarball directly from CRAN (via \verb{/vsitar//vsicurl/})
and identifies files that GDAL can read. No download required.
}
\details{
The function reads the package tarball directly from CRAN using GDAL's
virtual file system handlers (\verb{/vsitar/} and \verb{/vsicurl/}), so files can
be identified without downloading the entire package.

The returned \code{dsn} values can be opened directly with GDAL-based tools
(e.g. \code{new(gdalraster::GDALVector, )}, \code{new(gdalraster::GDALRaster, )}, \code{terra::vect()},
\code{terra::rast()}, \code{sf::read_sf()}).

Some false positives may occur (e.g. CSV files detected as spatial, PNG
logos, orphan shapefile sidecars). The XYZ driver in particular may
incorrectly match spatial weights files (.gal, .gwt).
}
\examples{
scan_package("gdalraster")


# Scan multiple packages
packages <- c("spData", "gdalraster", "sf", "terra", "stars", "vapour")
results <- purrr::map_dfr(packages, purrr::possibly(scan_package, NULL))

# reference a discovered file directly
gpkg <- dplyr::filter(results, package == "spData", driver == "GPKG") |> dplyr::slice(1L)
v <- new(gdalraster::GDALVector, gpkg$dsn)
v$info()
v$close()
}
